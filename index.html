<!doctype html>
<meta charset="utf-8">
<title>간단 룰렛(샘플)</title>
<body>
  <h1>룰렛 데모</h1>
  <label>이름 (선택): <input id="name" placeholder="익명"></label>
  <div id="result" style="margin:16px 0; font-weight:bold"></div>
  <button id="spin">돌리기</button>

  <script>
    const prizes = ['커피쿠폰','영화예매권','10% 할인쿠폰','꽝'];
    const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyWdtVY2usVmbu80WBux2_BKT8nDtsHMOMp7nH0NSI3iO6m_ciP0TjqPpr4zSYmvhIN/exec';

    document.getElementById('spin').addEventListener('click', async () => {
      const name = document.getElementById('name').value || '익명';
      const pick = prizes[Math.floor(Math.random() * prizes.length)];
      document.getElementById('result').textContent = `당첨: ${pick}`;

      // 결과를 Google Apps Script 웹앱(스프레드시트에 저장)으로 전송
      const payload = { name, prize: pick, url: location.href, time: new Date().toISOString() };
      try {
        await fetch(APPS_SCRIPT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        console.log('전송 완료');
      } catch (err) {
        console.warn('전송 실패', err);
      }
    });
  </script>
</body>
